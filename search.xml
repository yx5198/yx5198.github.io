<?xml version="1.0" encoding="utf-8"?>
<search>
  
    
    <entry>
      <title><![CDATA[华为S7706配置]]></title>
      <url>%2F2017%2F04%2F27%2F%E5%8D%8E%E4%B8%BAS7706%E9%85%8D%E7%BD%AE%2F</url>
      <content type="text"><![CDATA[sysname Playcrab-Core &emsp; &emsp; &emsp; &emsp; &emsp;修改交换机默认名字 super password level 3 cipher XXX &emsp; &emsp; &emsp; &emsp; &emsp;增加交换机超级密码 vlan batch 10 20 30 40 50 52 60 70 72 76 &emsp; &emsp; &emsp; &emsp; &emsp;批量新建vlan undo telnet server enable &emsp; &emsp; &emsp; &emsp; &emsp; &emsp; 关闭交换机telnet访问 observe-port 1 interface GigabitEthernet4/0/44 &emsp; &emsp; &emsp; &emsp;配置高速以太口4/0/44口为镜像口 undo http server enable &emsp; &emsp; &emsp; &emsp;关闭web页面访问交换机 radius-server template XXX &emsp; &emsp; &emsp;配置radius模版 radius-server shared-key cipher XXX &emsp; &emsp; &emsp;&emsp; 配置radius共享密钥 radius-server authentication 172.16.XX.XX 1812 &emsp; &emsp; &emsp;radius认证服务器地址及端口 radius-server retransmit 2 &emsp; &emsp; &emsp; 配置Radius实时记帐包发送间隔时间为2分钟 undo radius-server user-name domain-included radius &emsp; &emsp;认证不加域名 acl number 3000 &emsp; &emsp; &emsp; &emsp; &emsp;&emsp; 创建访问控制列表 description meeting &emsp; &emsp; &emsp; &emsp; 控制列表描述是会议 rule 1000 deny ip source 172.16.X.X &emsp;0.0.0.X destination 172.16.X.X &emsp; 0.0.X.X &emsp; &emsp; &emsp; &emsp; &emsp;拒绝源176.16.X.X，访问目标172.16.X.X 定义流策略traffic classifier c_meeting operator or precedence 5if-match acl 3000 定义流动作traffic behavior b_permit permit 引用流策略和流动作traffic policy p_meetingclassifier c_meeting behavior b_permit 访问控制列表在虚拟接口vlan76，进的方向策略生效vlan 76traffic-policy p_meeting inbound #创建dhcp中继服务组,并指定服务组的IP地址dhcp server group 1dhcp-server 172.16.X.X 0#dhcp server group 2dhcp-server 172.16.X.X 1 #aaa&emsp; &emsp; &emsp; &emsp; &emsp; &emsp; &emsp; &emsp; 开启AAA服务 authentication-scheme default&emsp; &emsp; &emsp; 默认使用本地认证 authentication-scheme XX.com&emsp; &emsp; &emsp; 配置aaa认证域模版 authentication-mode radius local&emsp; &emsp;&emsp; 配置使用radius认证 authorization-scheme default&emsp; &emsp; &emsp; 默认授权方式 accounting-scheme default &emsp; &emsp; &emsp; 默认计费方式 domain default&emsp; &emsp; &emsp; 默认域 domain XXX &emsp; &emsp; &emsp; 创建AAA默认域 authentication-scheme XXX.com&emsp; &emsp; &emsp; 应用认证域 radius-server XXX.com&emsp; &emsp; &emsp; &emsp; radius认证模版 local-user admin password cipher XXX&emsp; &emsp; &emsp; 配置admin密码 local-user admin service-type telnet terminal ssh web 8021x http&emsp; 授权admin用登陆方式#ntp-service unicast-server 172.16.X.X &emsp; &emsp; 指向时间同步服务器#interface Vlanif10 &emsp; &emsp; &emsp; &emsp; 进入vlan10虚拟接口 description to_chanpinfuwu&emsp; &emsp; &emsp; &emsp; 描述vlan10是产品服务 ip address 172.16.X.X 255.255.X.0&emsp; &emsp; &emsp; &emsp; 配置IP地址及其掩码 dhcp select relay&emsp; &emsp; &emsp; &emsp; 开启dhcp中继 dhcp relay server-select 1 &emsp; &emsp; &emsp; &emsp; dhcp中继指向中继组1 interface Eth-Trunk1 &emsp; &emsp; &emsp; &emsp; 创建聚合组Eth-Trunk1 description To Playcrab-FireWall&emsp; &emsp; &emsp; &emsp; 描述Eth-Trunk1连接Playcrab-FireWall port link-type trunk&emsp; &emsp; &emsp; &emsp; 端口链路类型为中继链路 port trunk pvid vlan 255&emsp; &emsp; &emsp; &emsp; 设置端口的默认vlan标签 undo port trunk allow-pass vlan 1&emsp; &emsp; &emsp; &emsp; 禁止vlan1通过中继链路端口 port trunk allow-pass vlan 255&emsp; &emsp; &emsp; &emsp; &emsp; &emsp; 允许vlan255通过中继链路端口 #interface GigabitEthernet4/0/47&emsp; &emsp; &emsp; &emsp; &emsp; &emsp;进入高速以太口 description To Playcrab-FrieWall-G0/0/1&emsp; &emsp; &emsp; &emsp; &emsp; 描述连接防火墙的G0/0/1口 eth-trunk 1 &emsp; &emsp; &emsp; &emsp; 加入聚合组1 ip route-static 0.0.0.0 0.0.0.0 172.16.X.X&emsp; &emsp; &emsp; &emsp; 配置默认路由 #snmp-agent&emsp; &emsp; &emsp; &emsp;开启交换机snmp服务 snmp-agent community read cipher XXX &emsp; &emsp; &emsp; &emsp; 配置snmp的团体名为XXX snmp-agent sys-info version all&emsp; &emsp; &emsp; &emsp; 设置系统启用的snmp的版本号#ssh authentication-type default password&emsp; &emsp; &emsp; &emsp; SSH认证类型，默认密码认证 #user-interface con 0&emsp; &emsp; &emsp; &emsp; 进入交换机console口 authentication-mode password&emsp; &emsp; &emsp; &emsp; 密码认证模式 set authentication password cipher XXX&emsp; &emsp; &emsp; &emsp;设置密码XXX为密文#user-interface vty 0 4 &emsp; &emsp; &emsp; &emsp; 创建vty虚拟终端 authentication-mode aaa &emsp; &emsp; &emsp; &emsp; 认证模式为AAA protocol inbound ssh &emsp; &emsp; &emsp; &emsp; 接入类型使用ssh]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[编译安装LAMP]]></title>
      <url>%2F2017%2F03%2F31%2F%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85LAMP%2F</url>
      <content type="text"><![CDATA[目前的web服务器多是用LAMP来搭建的。所谓的LAMP，指的是几款开源软件的组合构成的动态web网站系统。 L=Linux A=Apache M=Mysql P=PHP/Perl/Python。 我们主要来说一下编译安装： 1.安装apache 先下载好相关的源码包：这里下载的是httpd-2.2.21.tar 新建一个文件夹，取名software ：mkdir /root/software 把下载的httpd-2.2.21.tar放在该目录下 注意，检查一下GCC开发工具]在安装软件之前要确保GCC等开发工具都已经安装妥当。 再检查httpd是否已经停用，因为系统会安装自带的Apache，不管你是否选择安装它。 一切ok，开始安装。 [解压源代码] [进入源码目录] [编译配置] ./configure –prefix=/usr/local/apache –enable-so –enable-rewrite [编译并安装] [启动Apache] [测试是否正常] 添加开机自动启动httpd服务 cp /usr/local/apache/bin/apachectl /etc/rc.d/init.d/httpd chkconfig –add httpd vim /etc/rc.d/init.d/httpd 添加上#chkconfig:345 85 15#description: Start and stops the Apache HTTP Server 然后 chmod +x /etc/rc.d/init.d/httpd chkconfig –add httpd 然后可以用setup命令进入服务设置，设置为开机启动 2.安装mysql 首先确保系统中没有安装过mysql 下载源码包到/root/software/目录下 mysql-5.1.55.tar.gz [创建MySQL使用的系统用户与组] useradd –M –s /sbin/nologin mysql #添加mysql这个用户,同时添加到mysql组里，不给登陆shell [解压源代码] [进入源码目录] [编译并安装] checking for termcap functions library… configure: error: No curses/termcap library found [root@localhost mysql-5.1.55]# make make: * 没有指明目标并且找不到 makefile。 停止。 如果报这个错误，说明没有安装ncurses这个包 拷贝my-medium.cnf文件到/etc/目录下并重命名为my.cnf 修改字符集 [client] default-character-set=utf8 [mysqld] 重启mysql 查看字符集设置 [初始化数据及调整权属] [注册MySQL数据库程序库路径] 可以暂时不设置 echo “/usr/local/mysql/lib/mysql” &gt;&gt; /etc/ld.so.conf 注：其它的一些应用程序在使用MySQL数据库的时候，需要用到MySQL提供接口程序库；因此要把这个程序库的有效路径注册到Linux中，以便其它应用程序能够找到。 [启动MySQL并设置数据库管理员密码] 变量，这样可以不用进入到mysql的安装目录下进行mysql操作或者做个软连接： ln -s /usr/local/mysql/bin/mysql /usr/bin/mysql 添加mysql开机自动启动 cp /root/soft/mysql-5.1.55/support-files/mysql.server /etc/init.d/mysqld cd /etc/init.d/ chkconfig –add mysqld chkconfig mysqld on [登录数据库测试] 测试成功 3.安装PHP 1、检查各种库源文件 如果发现没有相应的库，我们需要下载一个编译安装。 例如：jpegsrc 这个库。我们下载的是jpegsrc.v8b.tar.gz包。安装后进入到该目录： –enable-shared 参数必须家，意思是创建共享库。 然后编译安装 注：GD库，是图形图像处理扩展库，提供了处理图片的API，有了它PHP才能正确处理GIF、JPEG、PNG等图形图像格式。如下： [解压源码包] [编译前配置] [编译并安装] [复制php.ini配置文件] [修改Apache主配置文件httpd.conf]添加支持PHP环境的相关配置。 [进行测试] 在/usr/local/apache/htdocs 目录下创建一个index.php文件 编辑index.php文件 保存退出。重启apache服务/usr/local/apache/bin/apachectl -k restart 打开浏览器看是否支持php 如果弹出的是下载该项，重启一下服务器 弹出该画面，说明php安装编译成功。]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[华为S5700配置SSH和Raidus]]></title>
      <url>%2F2017%2F03%2F28%2F%E5%8D%8E%E4%B8%BAS5700%E9%85%8D%E7%BD%AESSH%E5%92%8CRaidus%2F</url>
      <content type="text"><![CDATA[clock timezone beijing add 8 &emsp; &emsp; 配置交换机时区 sys undo cluster enable rsa local-key-pair create &emsp; &emsp; 创建交换机密钥 y 1024 &emsp; &emsp; 密钥长度默认512 sysname C02 &emsp; &emsp; 修改交换机名 vlan batch 10 20 30 40 50 60 70 72 76 78 &emsp; &emsp; 批量创建vlan vlan batch 80 84 90 100 110 255 interface vlan 255 &emsp; &emsp; 创建并进入vlan 虚拟接口 ip add 172.16.xx.xx 24 &emsp; &emsp; 配置ip地址 quit &emsp; &emsp; 退出当前视图 radius-server template xx.com &emsp; &emsp; 配置radius模版 radius-server authentication 172.16.xx.xx 1812&emsp; &emsp; &emsp; radius认证服务器地址及端口 radius-server shared-key cipher xx &emsp; &emsp; radius共享密钥 radius-server retransmit 2 undo radius-server user-name domain-included &emsp; &emsp; raius认证不加域名 quit aaa &emsp; &emsp; 配置aaa模版 authentication-scheme xx.com &emsp; &emsp; 配置aaa认证域模版 authentication-mode radius local &emsp; &emsp; 配置使用radius认证 quit domain xx.com &emsp; &emsp; 创建aaa认证域 authentication-scheme xx.com &emsp; &emsp; 应用认证域 radius-server xx.com &emsp; &emsp; 应用radius认证模版 quit local-user admin password cipher xxxx &emsp; &emsp; 配置admin密码 local-user admin service-type ssh telnet &emsp; &emsp; 授权admin用户登录方式 quit user-interface vty 0 4 &emsp; &emsp; 创建vty虚拟终端 authentication-mode aaa &emsp; &emsp; 使用aaa认证方式 protocol inbound ssh &emsp; &emsp; 接入类型使用ssh undo user privilege level &emsp; &emsp; 取消本地用户等级授权 undo set authentication password quit stelnet server enable &emsp; &emsp; 开启ssh服务 ssh authentication-type default password &emsp; &emsp; ssh使用密码认证 ip route-static 0.0.0.0 0.0.0.0 172.16.xx.xx &emsp; &emsp; 配置默认路由 snmp-agent &emsp; &emsp; 开启snmp snmp-agent sys-info version all &emsp; &emsp; snmp兼容多版本 snmp-agent community read cipher xxxx &emsp; &emsp; 输入snmp团体名称 info-center loghost 172.16.xx.xx facility local5 &emsp; &emsp; 指向syslog日志服务器 user-interface console 0 &emsp; &emsp; 进入console接口 authentication-mode password &emsp; &emsp; 使用本地密码认证 set authentication password cipher xxxx &emsp; &emsp; 设置密码为密文 quit super password cipher xxxx &emsp; &emsp; 设置超级密码认证 undo mac-authen timer reauthenticate-period interface Vlanif1 &emsp; &emsp; 进入vlan1虚拟接口 shutdown &emsp; &emsp; 停用vlan 1接口 undo ip address dhcp-alloc &emsp; &emsp; 停用dhcp quit undo telnet server enable &emsp; &emsp; 停用telnet服务 y lldp en &emsp; &emsp; 开启链路发现协议 dhcp en &emsp; &emsp; 启用dhcp服务 dhcp snooping enable &emsp; &emsp; 启用dhcp窥探 interface Eth-Trunk1 &emsp; &emsp; 创建聚合端口1 port link-type trunk &emsp; &emsp; 配置端口类型为trunk port trunk pvid vlan 255 &emsp; &emsp; 将trunk打标记为255 port trunk allow-pass vlan all &emsp; &emsp; 放行所有vlan通过 undo port trunk allow-pass vlan 1 &emsp; &emsp; 禁止vlan 1通过 dhcp snooping trusted &emsp; &emsp; 信任dhcp窥探 quit port-group 1 &emsp; &emsp; 创建端口组 group-member GigabitEthernet 0/0/1 to GigabitEthernet 0/0/24&emsp; &emsp; 将1到24端口加入该组 shutdown &emsp; &emsp; 关闭该组下所有端口 port link-type acces &emsp; &emsp; 配置端口类型为access ntdp enable &emsp; &emsp;开启邻居拓扑发现协议 ndp enable &emsp; &emsp; 开启发现直连设备信息协议 bpdu enable &emsp; &emsp; 开启BPDU桥协议数据单元，防止环路产生，一般配合stp使用 loopback-detect enable &emsp; &emsp; 开启环路检测协议 loopback-detect action shutdown &emsp; &emsp; 发现环路进行关闭端口操作 dhcp snooping enable &emsp; &emsp; 开启dhcp窥探功能 ip source check user-bind enable &emsp;&emsp;将dhcp窥探信息进行绑定 br 40 &emsp; &emsp; 限制广播数据包为40%完整命令（broadcast-suppression） port de v 10 &emsp; &emsp; 配置端口所属vlan un sh &emsp; &emsp; 启用端口 quit undo port-group 1 &emsp; &emsp; 删除端口组 interface GigabitEthernet 0/1/1 &emsp; &emsp; 进入光端口 e 1 &emsp; &emsp; 加入到聚合端口Eth-Trunk1 interface GigabitEthernet 0/1/2 e 1 quit quit sa &emsp; &emsp; &emsp; 保存配置 y]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Extmail]]></title>
      <url>%2F2017%2F03%2F26%2FExtmail%2F</url>
      <content type="text"><![CDATA[一、系统环境 （1）编译环境 &emsp;&emsp;[root@web_mail]# yum install gcc gcc-c++ （2）依赖软件 &emsp;&emsp;[root@web_mail]# yum install openssl openssl-devel cyrus-sasl libtool-ltdl libtool-ltdl-devel db4 db4-devel expect expect-devel pcre pcre-devel （3）LAMP环境 &emsp;&emsp;[root@web_mail]# yum install httpd httpd-devel mysql mysql-server mysql-devel php php-mysql （4）设置mysql，apache开机启动 &emsp;&emsp;[root@web_mail ~]# chkconfig mysqld on &emsp;&emsp;[root@web_mail ~]# chkconfig httpd on 二、安装POSTFIX （1）安装 &emsp;&emsp;[root@web_mail ~]# yum install postfix （2）配置 &emsp;&emsp;[root@web_mail ~]# cd /etc/postfix/ &emsp;&emsp;[root@web_mail postfix]# postconf -n &gt; /etc/postfix/main2.cf &emsp;&emsp;[root@web_mail postfix]# mv main.cf main.cf.old &emsp;&emsp;[root@web_mail postfix]# mv main2.cf main.cf &emsp;&emsp;[root@web_mail postfix]# vi main.cf #inet_interfaces = localhost 注释掉下面这行，否则25端口只能本地连接#添加以下基本配置mynetworks = 127.0.0.1 myhostname = mail.xxx.com 主机设置 mydestination = $myhostname, localhost.$mydomain, localhost mail_name = Postfix - by playdod.com smtpd_banner = $myhostname ESMTP $mail_namesmtpd_error_sleep_time = 0smessage_size_limit = 10485760 邮件大小10Mmailbox_size_limit = 2097152000 邮箱大小2Gshow_user_unknown_table_name = no bounce_queue_lifetime = 1dmaximal_queue_lifetime = 1d （3）启动 &emsp;&emsp;[root@web_mail postfix]# service postfix start &emsp;&emsp;[root@web_mail postfix]# chkconfig postfix on &emsp;&emsp;[root@web_mail postfix]# ps aux|grep postfix &emsp;&emsp;[root@web_mail postfix]# netstat -tlnp|grep 25 （4）检查 &emsp;&emsp;[root@web_mail postfix]# postfix check &emsp;&emsp;[root@web_mail postfix]# postconf –a &emsp;&emsp;出现cyrus表示可以支持cyrus认证用户 &emsp;&emsp;[root@web_mail postfix]# postconf -m &emsp;&emsp;出现mysql表示可以支持mysql存储账号 三、安装Courier-Authlib （1）安装 &emsp;&emsp;[root@web_mail postfix]# groupadd vmail -g 1002 &emsp;&emsp;[root@web_mail postfix]# useradd vmail -u 1002 -g 1002 -d /home/domains &emsp;&emsp;[root@web_mail postfix]# cd /usr/local/src &emsp;&emsp;[root@web_mail src]#wget http://cznic.dl.sourceforge.net/project/courier/authlib/0.66.1/courier-authlib-0.66.1.tar.bz2 &emsp;&emsp;[root@web_mail src]# tar -jxf courier-authlib-0.66.1.tar.bz2 &emsp;&emsp;[root@web_mail src]# cd courier-authlib-0.66.1 &emsp;&emsp;[root@web_mail courier-authlib-0.66.1]# ./configure –with-mysql-libs –with-mysql-includes &emsp;&emsp;–with-authmysql –with-authmysql=yes –with-mailuser=vmail –with-mailgroup=vmail &emsp;&emsp;[root@web_mail courier-authlib-0.66.1]# make &amp;&amp; make install &emsp;&emsp;[root@web_mail courier-authlib-0.66.1]# make install-configure （2）修改配置文件 &emsp;&emsp;[root@web_mail courier-authlib-0.66.1]# cd /usr/local/etc/authlib &emsp;&emsp;[root@web_mail authlib]# vi authmysqlrc MYSQL_SERVER localhostMYSQL_USERNAME extmailMYSQL_PASSWORD extmailMYSQL_SOCKET /var/lib/mysql/mysql.sockMYSQL_PORT 3306MYSQL_OPT 0MYSQL_DATABASE extmailMYSQL_USER_TABLE mailboxMYSQL_CRYPT_PWFIELD passwordMYSQL_UID_FIELD 1002MYSQL_GID_FIELD 1002MYSQL_LOGIN_FIELD usernameMYSQL_HOME_FIELD homedirMYSQL_NAME_FIELD nameMYSQL_MAILDIR_FIELD maildirMYSQL_QUOTA_FIELD quotaMYSQL_SELECT_CLAUSE SELECT username,password,&quot;&quot;,uidnumber,gidnumber,\ CONCAT(&apos;/home/domains/&apos;,homedir), \ CONCAT(&apos;/home/domains/&apos;,maildir), \ quota, \ name \ FROM mailbox \ WHERE username = &apos;$(local_part)@$(domain)&apos; &emsp;&emsp;[root@web_mail authlib]# vi authdaemonrcauthmodulelist=&quot;authmysql&quot;authmodulelistorig=&quot;authmysql&quot; &emsp;&emsp;[root@web_mail authlib]# ln -s /usr/local/etc/authlib /etc/authlib （3）启动 &emsp;&emsp;[root@web_mail authlib]# /usr/local/sbin/authdaemond start &emsp;&emsp;[root@web_mail authlib]# ps aux|grep authdaemond &emsp;&emsp;[root@web_mail authlib]# echo “/usr/local/sbin/authdaemond start” &gt;&gt; /etc/rc.d/rc.local 四、安装Maildrop （1） 安装Courier-Unicode &emsp;&emsp;[root@web_mail authlib]# cd /usr/local/src &emsp;&emsp;[root@web_mail src]# tar -jxf courier-unicode-1.1.tar.bz2 &emsp;&emsp;[root@web_mail src]# cd courier-unicode-1.1 &emsp;&emsp;[root@web_mail courier-unicode-1.1]# ./configure &emsp;&emsp;[root@web_mail courier-unicode-1.1]# make &amp;&amp; make install （2） 安装Maildrop &emsp;&emsp;[root@web_mail courier-unicode-1.1]# cd /usr/local/src &emsp;&emsp;[root@web_mail src]# tar -jxf maildrop-2.7.2.tar.bz2 &emsp;&emsp;[root@web_mail src]# cd maildrop-2.7.2 &emsp;&emsp;[root@web_mail maildrop-2.7.2]# ./configure–enable-maildirquota –enable-maildrop-uid=1002 –enable-maildrop-gid=1002 –with-trashquota &emsp;&emsp;[root@web_mail maildrop-2.7.2]# make &amp;&amp; make install （3） 配置 &emsp;&emsp;[root@web_mail maildrop-2.7.2]# vi /etc/postfix/master.cf maildrop unix - n n - - pipe flags=DRhu user=vmail argv=/usr/local/bin/maildrop -w 90 -d $&#123;user&#125;@$&#123;nexthop&#125; $&#123;recipient&#125; $&#123;user&#125; $&#123;extension&#125; &#123;nexthop&#125; [root@web_mail maildrop-2.7.2]# vi /etc/postfix/main.cf maildrop_destination_recipient_limit = 1 五、安装Webmail前台 （1）安装 &emsp;&emsp;[root@web_mail src]# tar -zxvf extmail-1.2.tar.gz &emsp;&emsp;[root@web_mail src]# tar -zxvf extman-1.1.tar.gz &emsp;&emsp;[root@web_mail src]# mkdir /var/www/extsuite &emsp;&emsp;[root@web_mail src]# mv extman-1.1 /var/www/extsuite/extman &emsp;&emsp;[root@web_mail src]# mv extmail-1.2 /var/www/extsuite/extmail （2）配置extmail &emsp;&emsp;[root@web_mail src]# cd /var/www/extsuite &emsp;&emsp;[root@web_mail extsuite]# cp extmail/webmail.cf.default extmail/webmail.cf &emsp;&emsp;[root@web_mail extsuite]# vi extmail/webmail.cf SYS_MYSQL_USER = extmailSYS_MYSQL_PASS = extmail （3）配置extman &emsp;&emsp;[root@web_mail extsuite]# mkdir /var/www/extsuite/extman/session &emsp;&emsp;[root@web_mail extsuite]# cp extman/webman.cf.default extman/webman.cf &emsp;&emsp;[root@web_mail extsuite]# vi extman/webman.cf SYS_SESS_DIR = /var/www/extsuite/extman/session/SYS_DEFAULT_UID = 1002SYS_DEFAULT_GID = 1002 （4）初始化数据库 [1] 给数据库root用户设置密码 &emsp;&emsp;[root@web_mail extsuite]# service mysqld restart &emsp;&emsp;[root@web_mail extsuite]# mysql –uroot &emsp;&emsp;mysql&gt; set password for root@localhost=password(‘123456’); &emsp;&emsp;mysql&gt; quit [2] 导入extmail数据库 &emsp;&emsp;[root@web_mail extsuite]# mysql -uroot -p123456 &lt; extman/docs/extmail.sql [3] 修改参数后导入数据 &emsp;&emsp;[root@web_mail extsuite]#sed –i ‘s/extmail.org/playdod.com/g’ extman/docs/init.sql &emsp;&emsp;[root@web_mail extsuite]# sed -i ‘s/1000/1002/g’ extman/docs/init.sql &emsp;&emsp;[root@web_mail extsuite]# mysql -uroot -p123456 &lt;/var/www/extsuite/extman/docs/init.sql [4] 查看数据库 &emsp;&emsp;[root@web_mail extsuite]# mysql -uroot -p123456 &emsp;&emsp;mysql&gt; use extmail; &emsp;&emsp;&gt; show tables; &emsp;&emsp;mysql&gt; select username,uidnumber,gidnumber from mailbox; （5）配置postfix &emsp;&emsp;[root@webmail extsuite]# cp extman/docs/mysql*.cf /etc/postfix/ &emsp;&emsp;[root@web_mail extsuite]# vi /etc/postfix/main.cf virtual_alias_maps = mysql:/etc/postfix/mysql_virtual_alias_maps.cfvirtual_mailbox_domains = mysql:/etc/postfix/mysql_virtual_domains_maps.cfvirtual_mailbox_maps = mysql:/etc/postfix/mysql_virtual_mailbox_maps.cfvirtual_transport = maildropvirtual_uid_maps = static:1002virtual_gid_maps = static:1002 （6）设置权限和属主 &emsp;&emsp;[root@web_mail extsuite]# chown root.root -R extmail extman &emsp;&emsp;[root@web_mail extsuite]# chown -R vmail:vmail extmail/cgi/ extman/cgi/ extman/session （7）配置Apache虚拟主机 &emsp;&emsp;[root@web_mail extsuite]# vi /etc/httpd/conf.d/extmail.conf # VirtualHost for ExtMail SolutionNameVirtualHost *:80&lt;VirtualHost *:80&gt;ServerName mail.xx.com DocumentRoot /var/www/extsuite/extmail/html/ ScriptAlias /extmail/cgi/ /var/www/extsuite/extmail/cgi/Alias /extmail /var/www/extsuite/extmail/html/ScriptAlias /extman/cgi/ /var/www/extsuite/extman/cgi/Alias /extman /var/www/extsuite/extman/html/# Suexec configSuexecUserGroup vmail vmail&lt;/VirtualHost&gt; （8）重启服务 &emsp;&emsp;[root@web_mail extsuite]# service postfix restart &emsp;&emsp;[root@web_mail extsuite]# service httpd restart （9）建立Maildir [1] 手动建立Maildir 用于存放用户邮件的目录；在WEB上创建其他域名邮箱，会在此自动建立相应域名目录。 &emsp;&emsp;[root@web_mail extsuite]# cd extman/tools &emsp;&emsp;[root@web_mail tools]# ./maildirmake.pl /home/domains/playdod.com/postmaster/Maildir &emsp;&emsp;[root@web_mail tools]# chown -R vmail:vmail /home/domains [2]测试authlib认证登录账号 &emsp;&emsp;[root@web_mail tools]# /usr/local/sbin/authtest -s login postmaster@playdod.com extmail （10）安装其他依赖包 [1]安装绘图工具 &emsp;&emsp;[root@web_mail tools]# yum install -y rrdtool rrdtool-perl [2]安装依赖perl模块 &emsp;&emsp;[root@web_mail tools]# yum install -y cpan perl &emsp;&emsp;[root@web_mail tools]# yum install -y perl-YAML perl-Test-Exceptionperl-Crypt-PasswdMD5 perl-GD perl-CGI perl-Time-HiRes &emsp;&emsp;[root@web_mail tools]# perl -MCPAN -e ‘install Time::HiRes::Value’ &emsp;&emsp;[root@web_mail tools]# perl -MCPAN -e ‘install File::Tail’ &emsp;&emsp;[root@web_mail tools]# perl -MCPAN -e ‘install Unix::Syslog’ &emsp;&emsp;[root@web_mail tools]# perl -MCPAN -e ‘install DB_File’ &emsp;&emsp;[root@web_mail tools]# perl -MCPAN -e ‘install Encode::HanExtra’ [3]启动进程 &emsp;&emsp;[root@web_mail tools]# cd /var/www/extsuite/extman &emsp;&emsp;[root@web_mail extman]# cp -R addon/mailgraph_ext/ /usr/local/ &emsp;&emsp;[root@web_mail extman]# /usr/local/mailgraph_ext/mailgraph-init start &emsp;&emsp; &emsp;&emsp;[root@web_mail extman]# ps aux|grep mailgraph_ext &emsp;&emsp; &emsp;&emsp;[root@web_mail extman]# /var/www/extsuite/extman/daemon/cmdserver -v -d &emsp;&emsp;[root@web_mail extman]# ps aux|grep cmdserver &emsp;&emsp; &emsp;&emsp;[root@web_mail extman]#echo “/usr/local/mailgraph_ext/mailgraph-init start” &gt;&gt; /etc/rc.d/rc.local [root@web_mail extman]# echo “/var/www/extsuite/extman/daemon/cmdserver-v -d” &gt;&gt; /etc/rc.d/rc.local [4]定时任务 &emsp;&emsp;[root@web_mail extman]# crontab -e 0 4 * * * /var/www/extsuite/extman/tools/expireusers.pl -all postmaster@playdod.com30 4 * * * /var/www/extsuite/extman/tools/reportusage.pl -all /home/domains postmaster@playdod.com &emsp;&emsp;[root@web_mail extman]# service crond restart &emsp;&emsp;[root@web_mail extsuite]# vi /var/www/extsuite/extman/webman.cf &emsp;&emsp;取消管理后台登陆验证码 SYS_CAPTCHA_ON = 0 (11)测试web访问 [1]访问邮箱 帐号:postmaster 密码:extmail 域名:xxx.com [2]访问邮箱后台 帐号: root@xx.com 密码: xxxx* （12）检查Maildrop [1]查看版本信息 &emsp;&emsp;[root@web_mail extsuite]# maildrop –v &emsp;&emsp; [2]测试maildrop连接 &emsp;&emsp;[root@web_mail extsuite]# echo “test” | maildrop -V 10 -d postmaster@playdod.com &emsp;&emsp; 六、安装Cyrus-SASL使Postfix支持SMTP认证 （1）系统已默认安装Cyrus-SASL &emsp;&emsp;[root@mail ~]# rpm -aq|grep cyrus-sasl &emsp;&emsp; （2）配置cyrus-sasl vi /etc/sasl2/smtpd.conf &emsp;&emsp; &emsp;&emsp;[root@web_mail ~]# chmod 755 /usr/local/var/spool/authdaemon （3）配置postfix &emsp;&emsp;[root@web_mail ~]# vi /etc/postfix/main.cf &emsp;&emsp; &emsp;&emsp; &emsp;&emsp; &emsp;&emsp; &emsp;&emsp;[root@web_mail ~]# service postfix restart （4）测试SMTP认证 &emsp;&emsp;[root@web_mail ~]# perl -e ‘use MIME::Base64; print encode_base64 (“postmaster\@playdod.com”)’ &emsp;&emsp;[root@web_mail ~]# perl -e ‘use MIME::Base64; print encode_base64(“extmail”)’ &emsp;&emsp;[root@web_mail ~]# yum install -y telnet &emsp;&emsp;[root@web_mail ~]# telnet localhost 25 Connected to localhost.Escape character is &apos;^]&apos;.220 mail.playdod.com ESMTP Postfix - by playdod.comehlo localhost250-mail.playdod.com250-PIPELINING250-SIZE 10485760250-VRFY250-ETRN250-STARTTLS250-AUTH LOGIN PLAIN250-AUTH=LOGIN PLAIN250-ENHANCEDSTATUSCODES250-8BITMIME250 DSN auth login334 VXNlcm5hbWU6cG9zdG1hc3RlckBwbGF5ZG9kLmNvbQ==334 UGFzc3dvcmQ6YWJjZC4xMjM0235 2.7.0 Authentication successful quit221 2.0.0 ByeConnection closed by foreign host. 七、实现POP3、IMAP基本功能 （1）安装Courier-IMAP &emsp;&emsp;[root@web_mail ~]# cd /usr/local/src &emsp;&emsp;[root@web_mail ~]#=wget http://ncu.dl.sourceforge.net/project/courier/imap/4.15.1/courier-imap-4.15.1.tar.bz2 &emsp;&emsp;[root@web_mail src]# tar -jxf courier-imap-4.15.1.tar.bz2 &emsp;&emsp;[root@web_mail src]# cd courier-imap-4.15.1 &emsp;&emsp;[root@web_mail courier-imap-4.15.1]# ./configure –enable-workarounds-for-imap-client-bugs –with-authchangepwdir –enable-unicode –with-trashquota –disable-root-check &emsp;&emsp;[root@web_mail courier-imap-4.15.1]# make &amp;&amp; make install &emsp;&emsp;[root@web_mail courier-imap-4.15.1]# make install-configure （2）启动程序 &emsp;&emsp;[root@web_mail courier-imap-4.15.1]# cd /usr/lib/courier-imap/ &emsp;&emsp;[root@web_mail courier-imap]# /usr/lib/courier-imap/libexec/imapd.rc start &emsp;&emsp;[root@web_mail courier-imap]# echo “/usr/lib/courier-imap/libexec/imapd.rcstart” &gt;&gt; /etc/rc.local &emsp;&emsp;[root@web_mail courier-imap]# ps aux|grep imapd &emsp;&emsp; &emsp;&emsp;[root@web_mail courier-imap]# netstat -tnlp|grep 143 &emsp;&emsp; &emsp;&emsp;[root@web_mail courier-imap]# /usr/lib/courier-imap/libexec/pop3d.rc start &emsp;&emsp;[root@web_mail courier-imap]# echo “/usr/lib/courier-imap/libexec/pop3d.rcstart” &gt;&gt; /etc/rc.local &emsp;&emsp;[root@web_mail courier-imap]# ps aux|grep pop3d &emsp;&emsp; &emsp;&emsp;[root@web_mail courier-imap]# netstat -tnlp|grep 110 &emsp;&emsp; （3）设置imapd、pop3为启用状态 &emsp;&emsp;[root@web_mail courier-imap]# sed -i ‘s/IMAPDSTART=NO/IMAPDSTART=YES/g’ etc/imapd &emsp;&emsp;[root@web_mail courier-imap]# sed -i ‘s/POP3DSTART=NO/POP3DSTART=YES/g’ etc/pop3d （4）测试端口连接 &emsp;&emsp;[root@web_mail courier-imap]# telnet localhost 110 Connected to localhost.Escape character is &apos;^]&apos;.+OK Hello there.user postmaster@playdod.com +OK Password required.pass abcd.1234+OK logged in.list+OK POP3 clients that break here, they violate STD531 6652 6653 8714 32455 6956 3297quit+OK Bye-bye.Connection closed by foreign host &emsp;&emsp;[root@web_mail courier-imap]# telnet localhost 143 Connected to localhost.Escape character is &apos;^]&apos;.* OK [CAPABILITY IMAP4rev1 UIDPLUS CHILDREN NAMESPACE THREAD=ORDEREDSUBJECT THREAD=REFERENCES SORT QUOTA IDLE ACL ACL2=UNION STARTTLS] Courier-IMAP ready. Copyright 1998-2011 Double Precision, Inc. See COPYING for distribution information.tag login postmaster@playdod.com abcd.1234tag OK LOGIN Ok.tag logout* BYE Courier-IMAP server shutting downtag OK LOGOUT completedConnection closed by foreign host. 八、Webmail支持FCGI （1）装apache的mod_fastcgi模块 &emsp;&emsp;[root@web_mail ~]# yum install -y httpd-devel &emsp;&emsp;[root@web_mail ~]# cd /usr/local/src &emsp;&emsp;[root@web_mail src]# wget http://www.fastcgi.com/dist/mod_fastcgi-2.4.6.tar.gz &emsp;&emsp;[root@web_mail src]# tar zxvf mod_fastcgi-2.4.6.tar.gz &emsp;&emsp;[root@web_mail src]# cd mod_fastcgi-2.4.6 &emsp;&emsp;[root@web_mail mod_fastcgi-2.4.6]# cp Makefile.AP2 Makefile &emsp;&emsp;[root@web_mail mod_fastcgi-2.4.6]# find / -name “build” -type d &emsp;&emsp;[root@web_mail mod_fastcgi-2.4.6]# make top_dir=/usr/lib64/httpd/ install （2）查看模块是否生成 &emsp;&emsp;[root@web_mail mod_fastcgi-2.4.6]# ls /etc/httpd/modules/mod_fastcgi.so （3）安装Extmail需要的perl-FCGI模块 &emsp;&emsp;[root@web_mail mod_fastcgi-2.4.6]# yum install perl-FCGI &emsp;&emsp;[root@web_mail mod_fastcgi-2.4.6]# vi /etc/httpd/conf.d/extmail.conf （4）配置虚拟主机文件 &emsp;&emsp;/Users/yx/blog/source/F6F44294-9C5F-40E1-B9C6-FB25DA663BB4.png （5）修改启动脚本，并启动 &emsp;&emsp;[root@web_mail mod_fastcgi-2.4.6]# vi /var/www/extsuite/extmail/dispatch-initSU_UID=vmail SU_GID=vmail &emsp;&emsp;[root@web_mail mod_fastcgi-2.4.6]# /var/www/extsuite/extmail/dispatch-init start &emsp;&emsp;[root@web_mail mod_fastcgi-2.4.6]# echo “/var/www/extsuite/extmail/dispatch-init start” &gt;&gt; /etc/rc.d/rc.local &emsp;&emsp;[root@web_mail mod_fastcgi-2.4.6]# service httpd restart &emsp;&emsp;[root@web_mail mod_fastcgi-2.4.6]# ps aux|grep dispatch.fcgi &emsp;&emsp; &emsp;&emsp;[root@web_mail mod_fastcgi-2.4.6]# netstat -tnlp|grep 8888 &emsp;&emsp;]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[人类与环境]]></title>
      <url>%2F2017%2F03%2F23%2Frenleiyuhuanjing%2F</url>
      <content type="text"><![CDATA[1.人与动物 2.人与植物 3.人与空气 4.人类的进步与保护环境 5.自我救赎 6.世界末日 &emsp;&emsp;&emsp;这是一个看似很大的标题，却是和每一个人都息息相关，人类经过了上亿年的进化终于站到了食物链的顶端，如果恐龙还生活至今的话，菜单上应该少不了红烧霸王龙，清蒸剑齿龙，人类自从什么都可以放在盘中之后，动物们也面临着多了这么一位最厉害的天敌，从最开始的果腹，到现在已经是为了满足人类的贪欲，为此濒临灭绝的物种越来越多，即使是人类只需要它们的胆汁，鱼鳍，。。。。。。人类的手段也是残忍至极。人类和动物都共同生活在这个地球上，这个星球不光是人类的也是动物的，它们同样拥有生存的权利。 &emsp;&emsp;&emsp;现在是春暖花开的季节，不管是步行还是坐车，沿途都会看到已经盛开的迎春花，桃花和梅花，还有那片曾经被白雪覆盖的土地上窜出的一颗颗的绿油油的小草，都象征着春天，象征的生命，如果有什么烦心的事情，看到了这些，心情总会有一丝愉悦，给人带来好的心情，不然怎么亲人之间要送鲜花，爱人之间要送鲜花呢？现在人们的生活水平提高，很多精神追求也在不断翻新，但是不变的，是在家里的阳台上，种上几盆绿植，早上起来浇浇水，在忙碌的一天过后，窝在沙发上，沏上一壶清茶，欣赏着屋里这一抹绿色，小环境是如此，大环境当然也是这样就才是再好不过了，处处是鸟语花香，小鸟可以在树上筑巢，而不是高高的电线杆和高压电塔，道路两旁可以有一排排的大树，清风徐来的时候闻到的是阵阵花香，草香，人类需要这些绿色，需要这些植物，正如同需要吃饭穿衣一样。 &emsp;&emsp;&emsp;各种植物都需要空气和水来进行光合作用，才能生长，才能生存，蓝天白云是空气的基础，记得在若干年前有一个广而告之，场景是在幼儿园中，一群小朋友在画画，但是每一幅画都是黑黑的灰灰的，图里没有任何植物和动物，只有一个个冒着浓烟的工厂烟囱，天空一片灰色，“不要让我们的孩子，看不到蓝天”大概类似的广告语，现在看看，这应该是印证了另一个广告的话，广告也有真实的，“不看广告，看疗效”果然没有骗我们，一年365天，蓝天屈指可数，剩下的都是灰蒙蒙的雾霾，相继而来的是种种连医生都没有见过的疾病，人们束手无策，雾霾最重的时候，“遛狗不见狗，狗绳提在手，见绳不见手，狗叫我才走”，还有网友在朋友圈发了照片，大家都认为是恐怖片《寂静岭》的时候，朋友说这是北京的早晨。 &emsp;&emsp;&emsp;人与动物、植物，空气，都是大环境中的一部分，环境保护也不是新话题，随着人类不断的进步，不可避免的在破坏环境，但这并不是无法挽救的，环境并不是人类发展进步必须的牺牲品，环境的破坏，地震、火山爆发、洪水、旱灾、龙卷风、台风，是地球的呐喊和哭泣，我们就是许多年前的广而告之中的孩子，现在我们长大了，让我们从我做起，大家都参与到保护环境中来，保护环境，保护动物，保护植物，就是保护我们自己，人类越是进步，越应该重视环境，无环境，不人类。 &emsp;&emsp;&emsp;不要让我们的孩子连蓝天的样子都没有见过，只能在网络上搜寻，还地球一个干净的蓝天，清新的空气，生态平衡的大自然，才是人类发展的最终目标。 &emsp;&emsp;&emsp;不要真等到世界末日那一天，才去后悔，为什么买不起诺亚方舟的船票，其实不是物质的贫穷，而是精神的贫穷。大自然的和谐，生态平衡，何须那张船票。世界之大，我们如此渺小，但也可以伟大，全都看我们是如何去做。]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Hello World]]></title>
      <url>%2F2017%2F03%2F20%2Fhello-world%2F</url>
      <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post$ hexo new "My New Post" More info: Writing Run server$ hexo server More info: Server Generate static files$ hexo generate More info: Generating Deploy to remote sites$ hexo deploy More info: Deployment]]></content>
    </entry>

    
  
  
</search>
